<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- google fonts link -->
    <!-- Link Swiper's CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
    />

    <!-- favicon -->
    <link rel="icon" href="/images/transparent.png" type="image/x-icon" />
    <!-- boxicon link -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css"
    />
    <!-- css link home.css -->
    <link rel="stylesheet" href="/styles/home.css" />
    <link rel="stylesheet" href="/styles/footer.css" />

    <title>All Care Academy Library</title>
  </head>
  <body>
    <div class="container">
      <div class="home">
        <div class="header-main">
          <header>
            <div class="logo">
              <img src="/images/transparent.png" alt="" />
              <h2>অল কেয়ার একাডেমী</h2>
            </div>
            <div class="searchbar-header">
              <div class="search-inpfield">
                <form action="/search_page" method="post">
                  <input
                    type="text"
                    name="search"
                    id="searchfield"
                    autocomplete="off"
                    placeholder="বইয়ের নাম ও লেখক দিয়ে অনুসন্ধান করুন"
                  />
                  <button><i class="bx bx-search"></i></button>
                </form>
              </div>
              <div class="auto-suggetion"></div>
            </div>
            <nav>
              <ul>
                <button><a href="/login">লগ ইন</a></button>
              </ul>
            </nav>
            <div class="sidebar">
              <i class="bx bx-menu"></i>
            </div>
          </header>

          <!-- subheader -->
          <%-include("./partials/subheader.ejs")%>
          <!-- subheader -->
        </div>

        <!-- hero section -->
        <div class="hero">
          <div class="swiper mySwiper">
            <div class="swiper-wrapper">
              <%noticeimage.forEach((data)=>{%>
              <div class="swiper-slide">
                <img src="<%=data.image%>" alt="" />
              </div>
              <%})%>
            </div>
            <div class="swiper-button-next"></div>
            <div class="swiper-button-prev"></div>
            <div class="swiper-pagination"></div>
          </div>
        </div>
        <!-- hero section -->
      </div>
      <!-- --------------All Books------------------ -->
      <div class="all-book">
        <div class="all-booksearch">
          <div class="allbook-title">
            <h1>প্রকাশিত বই</h1>
          </div>
          <div class="viewall-field">
            <button><a href="/books">View All</a></button>
          </div>
        </div>
        <div class="all-bookcategory">
          <%if(bookdata.length > 0){%>
          <%bookdata.slice(0,12).forEach((data)=>{%>
          <div class="bookinfo-box">
            <a href="/book-information/<%=data._id%>">
              <div class="bookinfo-subbox">
                <div class="bookimg">
                  <img src="<%=data.image%>" alt="book_name" />
                </div>
                <div class="book-infotext">
                  <h3>শ্রেণী: <%=data.class_name%></h3>
                  <%if(data.full_name.length >60){%>
                  <h2><%=data.full_name.slice(0,60)%>...</h2>
                  <%}else{%>
                  <h2><%=data.full_name%></h2>
                  <%}%>
                </div>
              </div>
            </a>
          </div>
          <%})%> <%}else{%>
          <h2>আমাদের কাছে এখন কোনো বই নেই</h2>
          <%}%>
        </div>
      </div>
      <!-- --------------All Books------------------ -->
      <!-- --------------Story Books------------------ -->
      <div class="all-book">
        <div class="all-booksearch">
          <div class="allbook-title">
            <h1>গল্পের বই</h1>
          </div>
          <div class="viewall-field">
            <button><a href="/story">View All</a></button>
          </div>
        </div>
        <div class="all-bookcategory">
          <%if(storybook.length > 0){%>
          <%storybook.slice(0,6).forEach((data)=>{%>
          <div class="bookinfo-box">
            <a href="/book-information/<%=data._id%>">
              <div class="bookinfo-subbox">
                <div class="bookimg">
                  <img src="<%=data.image%>" alt="book_name" />
                </div>
                <div class="book-infotext">
                  <h3>শ্রেণী: <%=data.class_name%></h3>
                  <%if(data.full_name.length >60){%>
                  <h2><%=data.full_name.slice(0,60)%>...</h2>
                  <%}else{%>
                  <h2><%=data.full_name%></h2>
                  <%}%>
                </div>
              </div>
            </a>
          </div>
          <%})%> <%}else{%>
          <h2>আমাদের কাছে এখন কোনো বই নেই</h2>
          <%}%>
        </div>
      </div>
      <!-- --------------All Books------------------ -->
      <!-- --------------All Books------------------ -->
      <div class="all-book">
        <div class="all-booksearch">
          <div class="allbook-title">
            <h1>জনপ্রিয় বই</h1>
          </div>
          <div class="viewall-field">
            <button><a href="/books">View All</a></button>
          </div>
        </div>
        <div class="all-bookcategory">
          <%if(bookdata.length > 0){%> <%bookdata.slice(0,6).forEach((data)=>{%>
          <div class="bookinfo-box">
            <a href="/book-information/<%=data._id%>">
              <div class="bookinfo-subbox">
                <div class="bookimg">
                  <img src="<%=data.image%>" alt="book_name" />
                </div>
                <div class="book-infotext">
                  <h3>শ্রেণী: <%=data.class_name%></h3>
                  <%if(data.full_name.length >60){%>
                  <h2><%=data.full_name.slice(0,60)%>...</h2>
                  <%}else{%>
                  <h2><%=data.full_name%></h2>
                  <%}%>
                </div>
              </div>
            </a>
          </div>
          <%})%> <%}else{%>
          <h2>আমাদের কাছে এখন কোনো বই নেই</h2>
          <%}%>
        </div>
      </div>
      <!-- --------------All Books------------------ -->
      <!-- ----------------about library----------------- -->
      <!-- <div class="about-main">
          <div class="about-text">
            <div></div>
            <h1>About Us</h1>
          </div>
          <div class="about-submain">
            <div class="about-box about-left">
              <div class="aboutbox abbox1">
                <div class="iconbox">
                  <img src="/images/member-card.png" alt="" />
                </div>
                <h2>Member Card</h2>
                <p>
                  Lorem ipsum dolor sit amet consectetur adipisicing elit. Veniam
                  officia, facere alias porro sed neque possimus fugit est
                  asperiores voluptatem.
                </p>
              </div>
              <div class="aboutbox abbox1">
                <div class="iconbox">
                  <img src="/images/member-card.png" alt="" />
                </div>
                <h2>Member Card</h2>
                <p>
                  Lorem ipsum dolor sit amet consectetur adipisicing elit. Veniam
                  officia, facere alias porro sed neque possimus fugit est
                  asperiores voluptatem.
                </p>
              </div>
              <div class="aboutbox abbox1">
                <div class="iconbox">
                  <img src="/images/member-card.png" alt="" />
                </div>
                <h2>Member Card</h2>
                <p>
                  Lorem ipsum dolor sit amet consectetur adipisicing elit. Veniam
                  officia, facere alias porro sed neque possimus fugit est
                  asperiores voluptatem.
                </p>
              </div>
              <div class="aboutbox abbox1">
                <div class="iconbox">
                  <img src="/images/member-card.png" alt="" />
                </div>
                <h2>Member Card</h2>
                <p>
                  Lorem ipsum dolor sit amet consectetur adipisicing elit. Veniam
                  officia, facere alias porro sed neque possimus fugit est
                  asperiores voluptatem.
                </p>
              </div>
            </div>
            <div class="about-box about-right">
              <img
                src="https://images.pexels.com/photos/1370291/pexels-photo-1370291.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"
                alt=""
              />
            </div>
          </div>
        </div> -->
      <!-- ----------------about library----------------- -->
      <!-- --------------------------footer-------------------- -->
      <%-include("./partials/footer.ejs")%>
      <!-- ----------------------footer------------------- -->
    </div>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tsparticles/confetti@3.0.3/tsparticles.confetti.bundle.min.js"></script>
    <script>
      const end = Date.now() + 15 * 500;

      // go Buckeyes!
      const colors = ["#a864fd", "#29cdff", "#78ff44", "#ff718d", "#fdff6a"];

      (function frame() {
        confetti({
          particleCount: 2,
          angle: 60,
          spread: 55,
          origin: { x: 0 },
          colors: colors,
        });

        confetti({
          particleCount: 2,
          angle: 120,
          spread: 55,
          origin: { x: 1 },
          colors: colors,
        });

        if (Date.now() < end) {
          requestAnimationFrame(frame);
        }
      })();

      let autocomplete_search = document.getElementById("searchfield");
      let search_result = document.querySelector(".auto-suggetion");
      autocomplete_search.addEventListener("input", () => {
        search_result.style.display = "block";
        load_data(autocomplete_search.value);
      });
      async function load_data(query) {
        let data = await fetch("/get_data");
        let datajson = await data.json();
        let matches = datajson.allbookinfo;
        search_result.innerHTML = "";

        let result = [];
        if (query.length > 0) {
          matches.filter((element) => {
            if (
              element.book_name.toLowerCase().includes(query.toLowerCase()) ||
              element.full_name.toLowerCase().includes(query.toLowerCase())
            ) {
              let createp = document.createElement("p");
              let createh2 = document.createElement("h2");
              let createboximg = document.createElement("img");
              createboximg.src = element.image;
              createh2.innerHTML = element.class_name;
              createp.innerHTML = element.full_name;
              let createbox = document.createElement("div");
              let createbox2 = document.createElement("div");
              createbox.setAttribute("class", "sugbox1");
              createbox2.setAttribute("class", "sugbox2");
              createbox.setAttribute("title", element.full_name);
              createh2.setAttribute("title", element.full_name);
              createp.setAttribute("title", element.full_name);
              createboximg.setAttribute("title", element.full_name);
              createbox.appendChild(createboximg);
              createbox2.appendChild(createp);
              createbox2.appendChild(createh2);
              createbox.appendChild(createbox2);
              search_result.appendChild(createbox);
              createbox.addEventListener("click", (e) => {
                autocomplete_search.value = e.target.title;
                search_result.style.display = "none";

                // console.log(e.target.title);
              });
            }
          });
        }
      }

      window.addEventListener("scroll", function () {
        let header = document.querySelector("header");
        header.classList.toggle("activeheader", scrollY > 100);
      });
      function onfocusinp() {
        var itempreview = document.querySelector(".item-preview");
        itempreview.style.display = "block";
      }
      // swipperjs
      var swiper = new Swiper(".mySwiper", {
        spaceBetween: 30,
        centeredSlides: true,
        autoplay: {
          delay: 2500,
          disableOnInteraction: false,
        },
        pagination: {
          el: ".swiper-pagination",
          clickable: true,
        },
        navigation: {
          nextEl: ".swiper-button-next",
          prevEl: ".swiper-button-prev",
        },
      });
    </script>
  </body>
</html>
